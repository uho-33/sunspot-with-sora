# Construct dataset

## Time series

python Fine_tune/vae/construct_dataset.py --source_dir "data\processed\validation\figure\figure-downsample\360p" --target_dir "dataset/validation/time-series/360p"

# Fine tune

## VAE
python Fine_tune/vae/finetune_vae.py --data_dir "/content/dataset/training/time-series/360p/L16-S8" --val_dir "/content/dataset/validation/time-series/360p/L16-S8" --pretrained_path "https://huggingface.co/hpcai-tech/OpenSora-VAE-v1.3" --output_dir "./checkpoint" --sequence_length 16 --image_size 480 --run_name "test-finetune_vae"


# Init
mkdir /content/dataset
cp ../dataset/VAE-sunspot-with-sora.zip /content/
unzip /content/VAE-sunspot-with-sora.zip -d /content/
pip install -r requirements.txt

# fine tune

torchrun --standalone --nproc_per_node 1 origin_opensora/scripts/train.py \
    Fine_tune/configs/train/fine_tune.py

colossalai run --nproc_per_node 1 --hostfile hostfile origin_opensora/scripts/train.py \
    Fine_tune/configs/train/fine_tune.py 
